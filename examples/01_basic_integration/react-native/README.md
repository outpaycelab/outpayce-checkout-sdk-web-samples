# 01 Basic Integration - React Native

Sample application to integrate the Outpayce Checkout SDK in a React Native mobile application using WebView.

## ğŸ›  Prerequisites

| Requirement | Version |
|-------------|---------|
| Node.js | 22+ LTS |
| macOS | 12.0+ (for iOS) |
| Xcode | 14.0+ (for iOS) |
| CocoaPods | Latest (for iOS) |
| Android Studio | Latest (for Android) |
| JDK | 17 (for Android) |

**Additionally:**
- An Outpayce Checkout Integration ([contact sales](https://outpayce.com/en/forms/contact-sales))
- A valid PPID (Payment Page ID) - see [How to get a PPID](#how-to-get-a-ppid) below

### Android Setup

1. **Android Studio** must be installed
2. In Android Studio, ensure **Android SDK Build-Tools** is installed:
   - Go to `Tools` â†’ `SDK Manager` â†’ `SDK Tools`
   - Check "Android SDK Build-Tools" and install

3. Set the `ANDROID_HOME` environment variable:
   ```bash
   # macOS/Linux - add to ~/.zshrc or ~/.bashrc
   export ANDROID_HOME=$HOME/Library/Android/sdk
   export PATH=$PATH:$ANDROID_HOME/platform-tools
   
   # Windows - typically:
   # C:\Users\<youruser>\AppData\Local\Android\Sdk
   ```

4. Accept Android licenses:
   ```bash
   # macOS/Linux
   $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager --licenses
   
   # Windows
   %ANDROID_HOME%\cmdline-tools\latest\bin\sdkmanager.bat --licenses
   ```

5. Install build-tools:
   ```bash
   # macOS/Linux
   $ANDROID_HOME/cmdline-tools/latest/bin/sdkmanager "build-tools;33.0.1"
   
   # Windows
   %ANDROID_HOME%\cmdline-tools\latest\bin\sdkmanager.bat "build-tools;33.0.1"
   ```

## How to get a PPID

A PPID (Payment Page ID) is a unique identifier generated by your backend server using the [Payment Checkout Experience API](https://outpayce.com/en/products/merchant-services/checkout-experience).

1. Your backend calls the Payment Checkout Experience API with payment details (amount, currency, etc.)
2. The API returns a PPID
3. Pass the PPID to the SDK to initialize the payment form


##  Quick Start

### 1. Install Dependencies

```bash
cd react-native
npm install
```

### 2. Run on iOS

```bash
# Install pods
pod install --project-directory=ios

# Start Metro bundler (keep this terminal open)
npm start

# In a new terminal, run the app
npm run ios
```

**First time setup in Xcode:**
1. Open `ios/OutpayceSDKTest.xcworkspace`
2. Go to **Signing & Capabilities**
3. Select your Apple Developer Team
4. Set a unique Bundle Identifier

### 3. Run on Android

```bash
# Start Metro bundler (keep this terminal open)
npm start

# In a new terminal, run the app
npm run android
```

## ğŸ“ Project Structure

```
react-native/
â”œâ”€â”€ App.tsx                 # Main component with WebView
â”œâ”€â”€ src/assets/
â”‚   â””â”€â”€ checkout.html       # Payment page with SDK
â”œâ”€â”€ ios/                    # iOS native project
â””â”€â”€ android/                # Android native project
    â””â”€â”€ app/src/main/assets/
        â””â”€â”€ checkout.html   # Copy for Android WebView
```

## ğŸ”§ How It Works

The app uses `react-native-webview` to embed the Outpayce SDK:

```tsx
<WebView
  source={require('./src/assets/checkout.html')}
  onMessage={handleMessage}
  javaScriptEnabled={true}
/>
```

Communication between React Native and WebView:
- **WebView â†’ RN:** `window.ReactNativeWebView.postMessage()`
- **RN â†’ WebView:** `webViewRef.current?.injectJavaScript()`

## ğŸ”§ Troubleshooting

**"No bundle URL present"**
- Make sure Metro bundler is running: `npm start`

**Pod install issues**
```bash
cd ios && pod install --repo-update && cd ..
```

**Clean build**
```bash
cd ios && rm -rf Pods build && pod install && cd ..
```

## ğŸ”— Resources

- [Outpayce Checkout User Guide](https://github.com/AMA-Outpayce/outpayce-checkout-sdk-web/blob/main/userguide.md)
- [React Native WebView](https://github.com/react-native-webview/react-native-webview)

## ğŸ“ Support

For questions, reach out at https://outpayce.com/en/company/contact-us
